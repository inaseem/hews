{"version":3,"file":"StoryDetails-BM93KYSS.js","sources":["../../src/hooks/useHNSearchItem.ts","../../src/components/Comment.tsx","../../src/components/StoryHeader.tsx","../../src/routes/StoryDetails.tsx"],"sourcesContent":["import { useQuery } from 'react-query';\nimport { useParams } from 'react-router-dom';\nimport { GetStoryDetailsResponse } from '../api/types';\nimport api from '../api';\n\nconst useHNSearchItem = () => {\n  const { id } = useParams();\n  const query = useQuery({\n    queryKey: ['HN_ITEM', id],\n    queryFn: () =>\n      api<GetStoryDetailsResponse>(`http://hn.algolia.com/api/v1/items/${id}`),\n  });\n  return query;\n};\n\nexport default useHNSearchItem;\n","import { useState } from 'react';\nimport { GetStoryDetailsResponse } from '../api/types';\nimport { timeAgo } from '../utils';\n\ninterface CommentProps {\n  data: GetStoryDetailsResponse;\n}\n\nconst Comment = ({ data }: CommentProps) => {\n  const [isReading, setIsReading] = useState(false);\n\n  return (\n    <div className=\"py-4 px-5\">\n      <div className=\"w-full\">\n        <div\n          className=\"leading-relaxed whitespace-pre-line before:bg-gradient-to-b before:from-transparent before:to-white dark:before:to-gray-800 text-sm [&_a]:text-primary-600\"\n          dangerouslySetInnerHTML={{ __html: data.text || '' }}\n        />\n        <div className=\"flex justify-between mt-2\">\n          <div className=\"text-primary-700 dark:text-primary-600 font-semibold text-sm\">\n            <span className=\"opacity-90\">{data.author}</span>\n            <span className=\"text-gray-400 mx-2\">•</span>\n            <span className=\"text-gray-500 text-xs font-medium\">\n              {timeAgo(data.created_at)}\n            </span>\n          </div>\n          {data.children.length > 0 && (\n            <button\n              onClick={() => setIsReading((prev) => !prev)}\n              className=\"border-none outline-none text-xs font-semibold uppercase text-primary-700 dark:text-primary-600\"\n            >\n              {isReading ? 'Hide Replies' : 'View Replies'}\n            </button>\n          )}\n        </div>\n      </div>\n      <div className=\"transition\">\n        {isReading && (\n          <div className=\"flex flex-col mt-4 border-l border-r border-gray-800\">\n            {data.children.map((child) => (\n              <Comment key={child.id} data={child} />\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Comment;\n","import { GetStoryDetailsResponse } from '../api/types';\nimport { timeAgo } from '../utils';\n\ninterface StoryHeaderProps {\n  data: GetStoryDetailsResponse;\n}\n\nexport const StoryHeader = ({ data }: StoryHeaderProps) => {\n  return (\n    <div className=\"bg-white dark:bg-gray-800 relative\">\n      <div className=\"w-full py-4 px-5 border border-transparent shadow-xl\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"w-full\">\n            <h4 className=\"font-bold dark:font-semibold tracking-wide text-lg leading-tight\">\n              {data.title}\n            </h4>\n\n            {data.url ? (\n              <div className=\"w-full overflow-hidden\">\n                <a\n                  href={data.url}\n                  target=\"_blank\"\n                  rel=\"noopener\"\n                  className=\"text-sm text-gray-600 dark:text-gray-400 leading-tight w-full truncate min-w-0 font-medium\"\n                >\n                  {data.url}\n                </a>\n              </div>\n            ) : null}\n\n            <div className=\"flex mt-1 items-center justify-between flex-wrap\">\n              <div className=\"font-semibold text-sm mr-2 flex items-center flex-shrink-0 text-primary-700 dark:text-primary-600 text-opacity-100\">\n                <span className=\"font-bold\">{data.points}</span>\n                <span className=\"mx-2\">•</span>\n                <span className=\"opacity-90\">{data.author}</span>\n                <span className=\"text-gray-400 dark:text-gray-500 mx-2\">•</span>\n                <span className=\"text-gray-500 text-xs font-medium\">\n                  {timeAgo(data.created_at)}\n                </span>\n              </div>\n              <div className=\"flex items-center\">\n                <div className=\"uppercase text-xs transition font-bold text-gray-600 dark:text-gray-400\">\n                  {data.children.length} Comments\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div className=\"leading-relaxed item-text whitespace-pre-line before:bg-gradient-to-b before:from-transparent before:to-white dark:before:to-gray-800 limit-text\"></div>\n      </div>\n    </div>\n  );\n};\n","import useHNSearchItem from '../hooks/useHNSearchItem';\nimport Button from '../components/Button';\nimport Comment from '../components/Comment';\nimport EmptyView from '../components/EmptyView';\nimport PageLayout from '../components/PageLayout';\nimport { Progress } from '../components/Progress';\nimport { StoryHeader } from '../components/StoryHeader';\n\nconst StoryDetails = () => {\n  const { data, isLoading, isFetching, isError, refetch } = useHNSearchItem();\n\n  if (isLoading) {\n    return (\n      <PageLayout>\n        <div className=\"sticky top-0\">\n          <Progress isIntermediate={isFetching} />\n        </div>\n        <EmptyView\n          title=\"Loading...\"\n          description=\"Loading story details. Please wait a moment\"\n        />\n      </PageLayout>\n    );\n  }\n\n  if (isError || !data) {\n    return (\n      <PageLayout>\n        <EmptyView\n          title=\"Error\"\n          description=\"There was an error in completing your request. Please try again\"\n          actions={\n            <Button onClick={() => refetch()} disabled={isFetching}>\n              Retry\n            </Button>\n          }\n        />\n      </PageLayout>\n    );\n  }\n\n  return (\n    <PageLayout>\n      <div className=\"sticky top-0\">\n        <Progress isIntermediate={isFetching} />\n      </div>\n      <StoryHeader data={data} />\n\n      {data.children.length > 0 ? (\n        <>\n          {data.children.map((child) => (\n            <Comment data={child} key={child.id} />\n          ))}\n        </>\n      ) : (\n        <EmptyView\n          title=\"No comments yet\"\n          description=\"There are no comments available for this item. Please try refreshing below to load latest updates\"\n          actions={\n            <Button onClick={() => refetch()} disabled={isFetching}>\n              Refresh\n            </Button>\n          }\n        />\n      )}\n    </PageLayout>\n  );\n};\n\nexport default StoryDetails;\n"],"names":["useHNSearchItem","id","useParams","useQuery","api","Comment","data","isReading","setIsReading","useState","jsxs","jsx","timeAgo","prev","child","StoryHeader","StoryDetails","isLoading","isFetching","isError","refetch","PageLayout","Progress","EmptyView","Button","Fragment"],"mappings":"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"}