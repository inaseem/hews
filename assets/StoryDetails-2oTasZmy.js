import{b as h,h as p,r as f,j as e,B as o}from"./index-vCRy_UFW.js";import{u as j,a as y,t as x,P as i,h as c,E as n}from"./PageLayout-COYqs3jD.js";const u=()=>{const{id:s}=h();return j({queryKey:["HN_ITEM",s],queryFn:()=>y(`${p}/items/${s}`)})},m=({data:s})=>{const[a,t]=f.useState(!1);return e.jsxs("div",{className:"py-4 px-5",children:[e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"leading-relaxed whitespace-pre-line before:bg-gradient-to-b before:from-transparent before:to-white dark:before:to-gray-800 text-sm [&_a]:text-primary-600",dangerouslySetInnerHTML:{__html:s.text||""}}),e.jsxs("div",{className:"flex justify-between mt-2",children:[e.jsxs("div",{className:"text-primary-700 dark:text-primary-600 font-semibold text-sm",children:[e.jsx("span",{className:"opacity-90",children:s.author}),e.jsx("span",{className:"text-gray-400 mx-2",children:"•"}),e.jsx("span",{className:"text-gray-500 text-xs font-medium",children:x(s.created_at)})]}),s.children.length>0&&e.jsx("button",{onClick:()=>t(r=>!r),className:"border-none outline-none text-xs font-semibold uppercase text-primary-700 dark:text-primary-600",children:a?"Hide Replies":"View Replies"})]})]}),e.jsx("div",{className:"transition",children:a&&e.jsx("div",{className:"flex flex-col mt-4 border-l border-r border-gray-800",children:s.children.map(r=>e.jsx(m,{data:r},r.id))})})]})},g=({data:s})=>e.jsx("div",{className:"bg-white dark:bg-gray-800 relative",children:e.jsxs("div",{className:"w-full py-4 px-5 border border-transparent shadow-xl",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"w-full",children:[e.jsx("h4",{className:"font-bold dark:font-semibold tracking-wide text-lg leading-tight",children:s.title}),s.url?e.jsx("div",{className:"w-full overflow-hidden",children:e.jsx("a",{href:s.url,target:"_blank",rel:"noopener",className:"text-sm text-gray-600 dark:text-gray-400 leading-tight w-full truncate min-w-0 font-medium",children:s.url})}):null,e.jsxs("div",{className:"flex mt-1 items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"font-semibold text-sm mr-2 flex items-center flex-shrink-0 text-primary-700 dark:text-primary-600 text-opacity-100",children:[e.jsx("span",{className:"font-bold",children:s.points}),e.jsx("span",{className:"mx-2",children:"•"}),e.jsx("span",{className:"opacity-90",children:s.author}),e.jsx("span",{className:"text-gray-400 dark:text-gray-500 mx-2",children:"•"}),e.jsx("span",{className:"text-gray-500 text-xs font-medium",children:x(s.created_at)})]}),e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{className:"uppercase text-xs transition font-bold text-gray-600 dark:text-gray-400",children:[s.children.length," Comments"]})})]})]})}),e.jsx("div",{className:"leading-relaxed item-text whitespace-pre-line before:bg-gradient-to-b before:from-transparent before:to-white dark:before:to-gray-800 limit-text"})]})}),w=()=>{const{data:s,isLoading:a,isFetching:t,isError:r,refetch:l}=u();return a?e.jsxs(i,{children:[e.jsx("div",{className:"sticky top-0",children:e.jsx(c,{isIntermediate:t})}),e.jsx(n,{title:"Loading...",description:"Loading story details. Please wait a moment"})]}):r||!s?e.jsx(i,{children:e.jsx(n,{title:"Error",description:"There was an error in completing your request. Please try again",actions:e.jsx(o,{onClick:()=>l(),disabled:t,children:"Retry"})})}):e.jsxs(i,{children:[e.jsx("div",{className:"sticky top-0",children:e.jsx(c,{isIntermediate:t})}),e.jsx(g,{data:s}),s.children.length>0?e.jsx(e.Fragment,{children:s.children.map(d=>e.jsx(m,{data:d},d.id))}):e.jsx(n,{title:"No comments yet",description:"There are no comments available for this item. Please try refreshing below to load latest updates",actions:e.jsx(o,{onClick:()=>l(),disabled:t,children:"Refresh"})})]})};export{w as default};
//# sourceMappingURL=StoryDetails-2oTasZmy.js.map
